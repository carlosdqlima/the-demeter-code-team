<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NASA Farm Navigators - Global agriculture game with real NASA data">
    <title>NASA Farm Navigators - Global Agriculture</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/images/ui/favicon.ico">
    
    <!-- CSS Frameworks -->
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@^5.8.0/dist/maplibre-gl.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/ui.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/farm-visual.css">
    <link rel="stylesheet" href="css/farm-html.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <!-- Floating space particles -->
        <div class="space-particles">
            <div class="particle particle-1"></div>
            <div class="particle particle-2"></div>
            <div class="particle particle-3"></div>
            <div class="particle particle-4"></div>
            <div class="particle particle-5"></div>
            <div class="particle particle-6"></div>
        </div>
        
        <div class="loading-content">
            <div class="nasa-logo">
                <i class="fas fa-satellite"></i>
                <h1>NASA Farm Navigators</h1>
            </div>
            <div class="loading-bar">
                <div class="loading-progress" id="loading-progress"></div>
            </div>
            <p id="loading-text">üöÄ Connecting to NASA satellites...</p>
        </div>
    </div>

    <!-- World Map Fullscreen Overlay -->
    <div id="world-map-overlay" class="world-map-overlay active">
        <div class="overlay-header">
            <h1>üåç NASA Farm Navigators</h1>
            <p>Select a region to start your agricultural journey</p>
        </div>
        <div id="world-map-fullscreen" class="world-map-fullscreen"></div>
        <div class="overlay-footer">
            <div class="map-legend">
                <div class="legend-item">
                    <span class="legend-color" style="background: #059669;"></span>
                    <span>Available Agricultural Regions</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #f59e0b;"></span>
                    <span>Click to Select</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Game Container -->
    <div id="game-container" class="game-container hidden">
        
        <!-- Header HUD -->
        <header class="game-header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-globe-americas"></i>
                    <span>NASA Farm Navigators</span>
                </div>
            </div>
            
            <div class="header-center">
                <div class="player-stats">
                    <div class="stat-item">
                        <i class="fas fa-coins"></i>
                        <span id="player-money">$50,000</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-leaf"></i>
                        <span id="sustainability-score">85%</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-chart-line"></i>
                        <span id="total-yield">1,250t</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="selected-region">Selected Region</span>
                    </div>
                </div>
            </div>
            
            <div class="header-right">
                <div class="game-controls">
                    <button class="btn-icon" id="change-region-btn" title="Change Region">
                        <i class="fas fa-globe"></i>
                    </button>
                    <button class="btn-icon" id="settings-btn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button class="btn-icon" id="help-btn" title="Help">
                        <i class="fas fa-question-circle"></i>
                    </button>
                    <button class="btn-icon" id="fullscreen-btn" title="Fullscreen">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- √Årea Central do Jogo - Interface √önica -->
            <div class="game-area-fullscreen">
                <!-- HUD Superior -->
                <div class="top-hud">
                    <div class="hud-left">
                        <div class="metric-item">
                            <span class="metric-label">TOTAL YIELD</span>
                            <span class="metric-value" id="total-yield">0</span>
                        </div>
                    </div>
                    
                    <div class="hud-center">
                        <div class="round-indicator">
                            <span class="round-text">ROUND 1:</span>
                            <span class="round-phase" id="current-phase">GROW</span>
                        </div>
                    </div>
                    
                    <div class="hud-right">
                        <div class="metric-item">
                            <span class="metric-label">SUSTAINABILITY</span>
                            <span class="metric-value" id="sustainability-score">10</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">TECH POINTS</span>
                            <span class="metric-value" id="tech-points">3</span>
                        </div>
                    </div>
                </div>

                <!-- Problem Indicators (left side) -->
                <div class="problem-indicators">
                    <div class="indicator-item" id="drought-indicator" title="Drought">
                        <span class="indicator-icon">üåµ</span>
                    </div>
                    <div class="indicator-item" id="pest-indicator" title="Pests">
                        <span class="indicator-icon">üêõ</span>
                    </div>
                    <div class="indicator-item" id="disease-indicator" title="Diseases">
                        <span class="indicator-icon">ü¶†</span>
                    </div>
                    <div class="indicator-item" id="weather-indicator" title="Extreme Weather">
                        <span class="indicator-icon">‚õàÔ∏è</span>
                    </div>
                </div>

                <!-- World Map Container -->
                <div id="world-map" class="world-map-container" style="display: none;">
                    <!-- The map will be created dynamically here -->
                </div>

                <!-- HTML Farm Container -->
                <div id="farm-container" class="farm-container" style="display: none;">
                    <!-- The farm grid will be created dynamically here -->
                </div>
                
                <!-- Farm Controls -->
                <div class="farm-controls" style="display: none;">
                    <div class="toolbar">
                        <div class="tool-section">
                            <h4>Tools</h4>
                            <div class="tool-buttons">
                                <button class="tool-btn active" data-tool="plant" title="Plant">
                                    <i class="fas fa-seedling"></i>
                                    <span>Plant</span>
                                </button>
                                <button class="tool-btn" data-tool="harvest" title="Harvest">
                                    <i class="fas fa-cut"></i>
                                    <span>Harvest</span>
                                </button>
                                <button class="tool-btn" data-tool="water" title="Water">
                                    <i class="fas fa-tint"></i>
                                    <span>Water</span>
                                </button>
                                <button class="tool-btn" data-tool="fertilize" title="Fertilize">
                                    <i class="fas fa-flask"></i>
                                    <span>Fertilize</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="care-section">
                            <h4>Care</h4>
                            <div class="care-buttons">
                                <button class="tool-btn" data-tool="pesticide" title="Apply Pesticide">
                                    <i class="fas fa-spray-can"></i>
                                    <span>Pesticide</span>
                                </button>
                                <button class="tool-btn" data-tool="organic-fertilizer" title="Organic Fertilizer">
                                    <i class="fas fa-leaf"></i>
                                    <span>Organic Fert.</span>
                                </button>
                                <button class="tool-btn" data-tool="soil-analysis" title="Soil Analysis">
                                    <i class="fas fa-microscope"></i>
                                    <span>Analysis</span>
                                </button>
                                <button class="tool-btn" data-tool="clean" title="Clean Plot">
                                    <i class="fas fa-broom"></i>
                                    <span>Clean</span>
                                </button>
                                <button class="tool-btn" data-tool="irrigation" title="Irrigation System">
                                    <i class="fas fa-shower"></i>
                                    <span>Irrigation</span>
                                </button>
                                <button class="tool-btn" data-tool="mulch" title="Soil Cover">
                                    <i class="fas fa-layer-group"></i>
                                    <span>Mulch</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="crop-section">
                            <h4>Crops</h4>
                            <div class="crop-buttons">
                                <button class="crop-btn active" data-crop="wheat" title="Wheat">
                                    <i class="fas fa-wheat-awn"></i>
                                    <span>Wheat</span>
                                </button>
                                <button class="crop-btn" data-crop="corn" title="Corn">
                                    <i class="fas fa-corn"></i>
                                    <span>Corn</span>
                                </button>
                                <button class="crop-btn" data-crop="soy" title="Soy">
                                    <i class="fas fa-leaf"></i>
                                    <span>Soy</span>
                                </button>
                                <button class="crop-btn" data-crop="tomato" title="Tomato">
                                    <i class="fas fa-apple-alt"></i>
                                    <span>Tomato</span>
                                </button>
                                <button class="crop-btn" data-crop="potato" title="Potato">
                                    <i class="fas fa-circle"></i>
                                    <span>Potato</span>
                                </button>
                                <button class="crop-btn" data-crop="carrot" title="Carrot">
                                    <i class="fas fa-carrot"></i>
                                    <span>Carrot</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="zoom-section">
                            <h4>View</h4>
                            <div class="zoom-controls">
                                <button class="zoom-btn" id="zoom-out" title="Zoom Out">
                                    <i class="fas fa-search-minus"></i>
                                </button>
                                <span class="zoom-level" id="zoom-level">100%</span>
                                <button class="zoom-btn" id="zoom-in" title="Zoom In">
                                    <i class="fas fa-search-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Button to return to map -->
                    <button id="back-to-map" class="back-to-map-btn" style="display: none;" title="Back to Map">
                        <i class="fas fa-globe"></i>
                        <span>Back to Map</span>
                    </button>
                </div>
                
                <!-- NASA Farm Navigators Integrated Interface -->
                
                <!-- Game Overlay UI -->
                <div class="game-overlay">
                    <div class="region-info" id="region-info">
                        <h4 id="region-name">Select a region</h4>
                        <div class="region-stats">
                            <div class="stat">
                                <i class="fas fa-thermometer-half"></i>
                                <span id="region-temp">--¬∞C</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-cloud-rain"></i>
                                <span id="region-humidity">--%</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-sun"></i>
                                <span id="region-solar">-- kWh/m¬≤</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons (bottom section) -->
                <div class="bottom-controls">
                    <!-- Glossary Button -->
                    <button class="control-btn glossary-btn" id="glossary-btn" title="Glossary">
                        <span class="btn-icon">üìñ</span>
                    </button>

                    <!-- Technology Buttons -->
                    <div class="tech-buttons">
                        <button class="tech-btn locked" title="Technology Locked">
                            <span class="lock-icon">üîí</span>
                        </button>
                        <div class="tech-separator"></div>
                        <button class="tech-btn locked" title="Technology Locked">
                            <span class="lock-icon">üîí</span>
                        </button>
                        <button class="tech-btn locked" title="Technology Locked">
                            <span class="lock-icon">üîí</span>
                        </button>
                        <button class="tech-btn locked" title="Technology Locked">
                            <span class="lock-icon">üîí</span>
                        </button>
                    </div>

                    <!-- Crops Button -->
                    <button class="control-btn crops-btn" id="crops-btn" title="Crops">
                        <span class="btn-icon">üåæ</span>
                    </button>
                </div>

                <!-- Status Message -->
                <div class="status-message" id="status-message">
                    <p>Keep your eyes open for problems on your farm and don't let them get out of control! There may be tools in your technology tree that could help combat some of these challenges.</p>
                </div>

                <!-- NASA Data Panel (Hidden by default) -->
                <div class="panel nasa-panel hidden">
                    <div class="panel-header">
                        <h3><i class="fas fa-satellite"></i> NASA Data</h3>
                        <div class="data-sources">
                            <small>Last update: <span id="nasa-last-update">--</span></small>
                        </div>
                    </div>
                    <div class="panel-content">
                        <!-- NASA POWER Climate Data -->
                        <div class="nasa-data-section">
                            <h4><i class="fas fa-cloud-sun"></i> Climate (NASA POWER)</h4>
                            <div class="data-item">
                                <i class="fas fa-thermometer-half"></i>
                                <span>Temperature: <span id="nasa-temperature">--¬∞C</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-cloud-rain"></i>
                                <span>Precipitation: <span id="nasa-precipitation">-- mm</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-sun"></i>
                                <span>Solar Radiation: <span id="nasa-solar-radiation">-- MJ/m¬≤</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-tint"></i>
                                <span>Humidity: <span id="nasa-humidity">--%</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-wind"></i>
                                <span>Wind: <span id="nasa-wind-speed">-- m/s</span></span>
                            </div>
                            <small class="data-source">Source: <span id="climate-source">--</span></small>
                        </div>

                        <!-- NASA Satellite Data -->
                        <div class="nasa-data-section">
                            <h4><i class="fas fa-satellite"></i> Satellite (MODIS/Landsat)</h4>
                            <div class="data-item">
                                <i class="fas fa-leaf"></i>
                                <span>NDVI: <span id="nasa-ndvi">--</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-thermometer-half"></i>
                                <span>Surface Temp: <span id="nasa-land-temp">--¬∞C</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-cloud"></i>
                                <span>Cloud Cover: <span id="nasa-cloud-cover">--%</span></span>
                            </div>
                            <small class="data-source">Source: <span id="satellite-source">--</span></small>
                        </div>

                        <!-- NASA SMAP Soil Data -->
                        <div class="nasa-data-section">
                            <h4><i class="fas fa-seedling"></i> Soil (SMAP)</h4>
                            <div class="data-item">
                                <i class="fas fa-tint"></i>
                                <span>Soil Moisture: <span id="nasa-soil-moisture">--%</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-thermometer-half"></i>
                                <span>Soil Temperature: <span id="nasa-soil-temp">--¬∞C</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-leaf"></i>
                                <span>Organic Matter: <span id="nasa-organic-matter">--%</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-vial"></i>
                                <span>Soil pH: <span id="nasa-soil-ph">--</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-water"></i>
                                <span>Salinity: <span id="nasa-soil-salinity">-- dS/m</span></span>
                            </div>
                            <small class="data-source">Source: <span id="soil-source">--</span></small>
                        </div>

                        <!-- Legacy Data (for compatibility) -->
                        <div class="nasa-data-section" style="display: none;">
                            <h4>Current Conditions (Legacy)</h4>
                            <div class="data-item">
                                <i class="fas fa-thermometer-half"></i>
                                <span>Soil Temperature: <span id="soil-temp">--¬∞C</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-tint"></i>
                                <span>Soil Moisture: <span id="soil-moisture">--%</span></span>
                            </div>
                            <div class="data-item">
                                <i class="fas fa-leaf"></i>
                                <span>Vegetation Index: <span id="vegetation-index">--</span></span>
                            </div>
                        </div>

                        <!-- NASA Satellite Image -->
                        <div class="section-header">
                            <h4>üì° Satellite Image</h4>
                        </div>
                        <div id="satellite-image" class="satellite-container">
                            <p style="text-align: center; color: #999;">Loading satellite image...</p>
                        </div>

                        <!-- Agricultural Activities -->
                        <div class="section-header">
                            <h4>üå± Agricultural Activities</h4>
                        </div>
                        <div id="activities-panel" class="activities-container">
                            <p style="text-align: center; color: #999;">Loading activities...</p>
                        </div>
                        
                        <div class="conservation-tips">
                            <h4>Conservation Tips</h4>
                            <div id="conservation-tips-content">
                                <!-- Tips will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Market Panel (Hidden by default) -->
                <div class="panel market-panel hidden">
                    <div class="panel-header">
                        <h3><i class="fas fa-chart-bar"></i> Global Market</h3>
                    </div>
                    <div class="panel-content">
                        <div class="market-prices" id="market-prices">
                            <!-- Market data will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <div class="weather-info">
                    <i class="fas fa-cloud-sun"></i>
                    <span id="current-weather">Sunny, 25¬∞C</span>
                </div>
            </div>
            
            <div class="status-center">
                <div class="game-time">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="game-date">Spring, Year 1</span>
                </div>
            </div>
            
            <div class="status-right">
                <div class="connection-status">
                    <i class="fas fa-satellite-dish" id="nasa-connection"></i>
                    <span>NASA Online</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal" id="settings-modal">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-content">
                <!-- Settings content -->
            </div>
        </div>
    </div>

    <!-- Region Information Modal -->
    <div id="region-info-modal" class="modal region-info-modal hidden">
        <div class="modal-overlay" onclick="RegionInfoModal.close()"></div>
        <div class="modal-content region-info-content">
            <div class="modal-header">
                <h2 id="region-modal-title">Region Information</h2>
                <button class="modal-close" onclick="RegionInfoModal.close()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="region-overview">
                    <div class="region-image">
                        <i class="fas fa-globe-americas region-icon"></i>
                        <div class="region-flag" id="region-flag"></div>
                    </div>
                    <div class="region-basic-info">
                        <h3 id="region-name">Region Name</h3>
                        <p id="region-description">Region description...</p>
                    </div>
                </div>
                
                <div class="region-details">
                    <div class="detail-section">
                        <h4><i class="fas fa-thermometer-half"></i> Climate</h4>
                        <div class="climate-info">
                            <span id="region-climate" class="climate-tag">Temperate</span>
                            <div class="climate-stats">
                                <div class="stat">
                                    <span class="label">Temperature:</span>
                                    <span id="region-temperature">15-25¬∞C</span>
                                </div>
                                <div class="stat">
                                    <span class="label">Precipitation:</span>
                                    <span id="region-precipitation">800-1200mm</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="fas fa-seedling"></i> Agricultural Specialties</h4>
                        <div id="region-specialties" class="specialties-grid">
                            <!-- Specialties will be inserted dynamically -->
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="fas fa-chart-line"></i> Regional Bonus</h4>
                        <div class="bonus-info">
                            <div class="bonus-card">
                                <i id="bonus-icon" class="fas fa-star"></i>
                                <div class="bonus-details">
                                    <span id="bonus-type">Bonus Type</span>
                                    <span id="bonus-value" class="bonus-value">+15%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="fas fa-satellite"></i> NASA Data</h4>
                        <div class="nasa-data">
                            <div class="data-item">
                                <span class="label">Soil Quality:</span>
                                <div class="progress-bar">
                                    <div id="soil-quality" class="progress-fill" style="width: 85%"></div>
                                </div>
                                <span class="value">85%</span>
                            </div>
                            <div class="data-item">
                                <span class="label">Water Availability:</span>
                                <div class="progress-bar">
                                    <div id="water-availability" class="progress-fill" style="width: 70%"></div>
                                </div>
                                <span class="value">70%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="RegionInfoModal.close()">
                    <i class="fas fa-arrow-left"></i>
                    Back to Map
                </button>
                <button class="btn btn-primary" id="confirm-region-btn" onclick="RegionInfoModal.confirmSelection()">
                    <i class="fas fa-check"></i>
                    Start Farm Here
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://unpkg.com/maplibre-gl@^5.8.0/dist/maplibre-gl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
    
    <!-- Game Scripts -->
    <script src="js/core/config.js"></script>
    <script src="js/core/utils.js"></script>
    <script src="js/data/nasa-api.js"></script>
    <script src="js/data/crops-data.js"></script>
    <script src="js/data/regions-data.js"></script>
    <script src="js/systems/region-info-modal.js"></script>
    <script src="js/systems/map-system.js"></script>
    <script src="js/systems/farm-system.js"></script>
    <script src="js/systems/visual-farm-system.js"></script>
    <script src="js/systems/html-farm-system.js"></script>
    <script src="js/systems/farm-integration.js"></script>
    <script src="js/systems/farm-persistence.js"></script>
    <script src="js/systems/agriculture-decision-engine.js"></script>
    <script src="js/systems/nasa-data-integration.js"></script>
    <script src="js/systems/glossary-system.js"></script>
    <script src="js/systems/problem-indicators.js"></script>
    <script src="js/systems/crops-system.js"></script>
    <script src="js/systems/weather-system.js"></script>
    <script src="js/systems/economy-system.js"></script>
    <script src="js/systems/tech-system.js"></script>
    <script src="js/ui/hud.js"></script>
    <script src="js/ui/panels.js"></script>
    <script src="js/ui/modals.js"></script>
    <script src="js/core/game.js"></script>
    <script src="js/main.js"></script>
</body>
</html>